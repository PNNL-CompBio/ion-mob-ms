Bootstrap: docker
From: python:3.7.16-bullseye
Includecmd: no


%files
    MZmine_FeatureFinder-batch.xml /Work/MZmine_FeatureFinder-batch.xml
    R_PARSE_II.R /Work/R_PARSE_II.R
    MZmine_FeatureFinder_Modifier.py /Work/MZmine_FeatureFinder_Modifier.py


%post

    #install java
    apt-get update && \
    apt-get install -y openjdk-11-jdk

    #install git
    apt-get -y update
    apt-get -y install wget unzip
    apt-get -y install git

    #install mzmine
    wget https://github.com/mzmine/mzmine2/releases/download/v2.41.2/MZmine-2.41.2.zip
    unzip MZmine-2.41.2.zip
    rm MZmine-2.41.2.zip
    sed -i 's/TMP_FILE_DIRECTORY=\/tmp/TMP_FILE_DIRECTORY=\/Work\/tmp/' /MZmine-2.41.2/startMZmine_Linux.sh    

    #install R    
    apt-get update && \
    apt-get upgrade -y && \
    apt-get install -y r-base
    apt install -y r-cran-doparallel


    #install python3.7
    #apt update && apt upgrade
    #apt-get install wget build-essential
    #apt-get install libreadline-gplv2-dev libncursesw5-dev libssl-dev \
    #libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev libffi-dev zlib1g-dev
    #cd /usr/src
    #wget https://www.python.org/ftp/python/3.7.9/Python-3.7.9.tgz
    #tar xzf Python-3.7.9.tgz
    #cd Python-3.7.9
    #./configure --enable-optimizations
    #make altinstall
    
%environment
    NODE_ENV=development
    ALLOW_HTTP=true
    URL=localhost
    export NODE_ENV PORT ALLOW_HTTP URL
